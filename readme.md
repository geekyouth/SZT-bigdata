# SZT-bigdata æ·±åœ³åœ°é“å¤§æ•°æ®å®¢æµåˆ†æç³»ç»Ÿ ğŸš‡ğŸš‡ğŸš‡

```
   ___     ____   _____           _         _      __ _      _             _
  / __|   |_  /  |_   _|   ___   | |__     (_)    / _` |  __| |   __ _    | |_    __ _
  \__ \    / /     | |    |___|  | '_ \    | |    \__, | / _` |  / _` |   |  _|  / _` |
  |___/   /___|   _|_|_   _____  |_.__/   _|_|_   |___/  \__,_|  \__,_|   _\__|  \__,_|
_|"""""|_|"""""|_|"""""|_|     |_|"""""|_|"""""|_|"""""|_|"""""|_|"""""|_|"""""|_|"""""|
"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'
```

## é¡¹ç›®è¯´æ˜ğŸš©ï¼š
- ğŸˆè¯¥é¡¹ç›®ä¸»è¦åˆ†ææ·±åœ³é€šåˆ·å¡æ•°æ®ï¼Œé€šè¿‡å¤§æ•°æ®æŠ€æœ¯è§’åº¦æ¥ç ”ç©¶æ·±åœ³åœ°é“å®¢è¿èƒ½åŠ›ã€‚
- âœ¨ğŸ‰ å¼ºè°ƒå­¦ä»¥è‡´ç”¨ï¼Œæœ¬é¡¹ç›®çš„åŸåˆ™æ˜¯å°½å¯èƒ½ä½¿ç”¨è¾ƒå¤šçš„å¸¸ç”¨æŠ€æœ¯æ¡†æ¶ï¼ŒåŠ æ·±å¯¹å„æŠ€æœ¯æ ˆçš„ç†è§£å’Œè¿ç”¨ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä½“éªŒå„æ¡†æ¶çš„å·®å¼‚å’Œä¼˜åŠ£ï¼Œä¸ºä»¥åçš„å¼€å‘é¡¹ç›®é€‰å‹åšåŸºç¡€ã€‚
- ğŸ‘‘ è§£å†³åŒä¸€ä¸ªé—®é¢˜ï¼Œå¯èƒ½æœ‰å¤šç§æŠ€æœ¯å®ç°ï¼›å®é™…çš„ä¼ä¸šå¼€å‘åº”å½“éµå®ˆæœ€ä½³å®è·µåŸåˆ™ã€‚


## æ•°æ®æºğŸŒï¼š
- æ·±åœ³å¸‚æ”¿åºœæ•°æ®å¼€æ”¾å¹³å°ï¼Œæ·±åœ³é€šåˆ·å¡æ•°æ® 133.7 ä¸‡æ¡ã€ç¦»çº¿æ•°æ®ã€‘ï¼Œ
https://opendata.sz.gov.cn/data/api/toApiDetails/29200_00403601
    
ç†è®ºä¸Šå¯ä»¥å½“ä½œå®æ—¶æ•°æ®ï¼Œä½†æ˜¯è¿™ä¸ªæ¥å£å“åº”å¤ªæ…¢äº†ï¼Œäºæ˜¯æœ¬é¡¹ç›®é‡‡ç”¨ç¦»çº¿æ€è·¯å¤„ç†ã€‚å½“ç„¶ï¼Œå¦‚æœé‡‡ç”¨ kafka é˜Ÿåˆ—æ–¹å¼ï¼Œä¹Ÿå¯ä»¥æ¨¡æ‹Ÿå‡ºå®æ—¶æ•ˆæœã€‚
    
## æ ¸å¿ƒæŠ€æœ¯æ ˆâš¡ï¼š
- flink-1.10
- redis-3.2
- SpringBoot-2.13
- knife4j-2.0 ï¼ˆå‰èº«ä¸º swagger-bootstrap-uiï¼‰
- 

## å¿«é€Ÿå¼€å§‹ğŸ›©ğŸ¥‡ï¼š
1- è·å–æ•°æ®æºçš„ appKeyï¼šhttps://opendata.sz.gov.cn/data/api/toApiDetails/29200_00403601

2- è°ƒç”¨ ETL-SpringBoot æ¨¡å—è·å–åŸå§‹æ•°æ®å­˜ç›˜ï¼Œ`cn/java666/etlspringboot/source/SZTData.saveData()`ï¼›

3- è°ƒç”¨ ETL-Flink æ¨¡å—ï¼Œå®ç° etl æ¸…æ´—ï¼Œå»é™¤é‡å¤æ•°æ®ï¼Œredis å¤©ç„¶å»é‡æ’åºï¼Œä¿è¯æ•°æ®å¹²å‡€æœ‰åºï¼Œ`cn.java666.etlflink.sink.MyRedisSink.main()`ã€‚

4- redis æŸ¥è¯¢ï¼Œredis-cli ç™»å½•:  
`> hget szt:pageJson 1`  

æˆ–è€… dbeaver å¯è§†åŒ–æŸ¥è¯¢ï¼š
![](.file/.pic/redis-szt-pageJson.png)

5- `cn.java666.etlspringboot.EtlSApp.main()` å¯åŠ¨åï¼Œä¹Ÿå¯ä»¥ç”¨ knife4j åœ¨çº¿è°ƒè¯• REST APIï¼š
![](.file/.pic/api-1.png)   

![](.file/.pic/api-debug.png)   

## æ›´æ–°æ—¥å¿—ğŸŒ¥ï¼š
- 2020-04-13 
    - é¡¹ç›®åˆå§‹åŒ–ï¼›
    - å®Œæˆæ•°æ®æºæ¸…æ´—å»é‡ï¼Œå­˜åˆ° redisï¼›
    - å®Œæˆ redis æŸ¥è¯¢ REST API çš„å¼€å‘ï¼›
    
